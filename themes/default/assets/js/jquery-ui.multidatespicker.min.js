(function(a){a.extend(a.ui,{multiDatesPicker:{version:"1.6.3"}});a.fn.multiDatesPicker=function(j){var h=arguments;var n=this;var p=new Date();var g=new Date(0);var i={};function l(q,s){if(!s){s="picked"}q=f.call(this,q);for(var r=0;r<this.multiDatesPicker.dates[s].length;r++){if(!k.compareDates(this.multiDatesPicker.dates[s][r],q)){return this.multiDatesPicker.dates[s].splice(r,1).pop()}}}function m(q,r){if(!r){r="picked"}return this.multiDatesPicker.dates[r].splice(q,1).pop()}function e(q,s,r){if(!s){s="picked"}q=f.call(this,q);q.setHours(0);q.setMinutes(0);q.setSeconds(0);q.setMilliseconds(0);if(k.gotDate.call(this,q,s)===false){this.multiDatesPicker.dates[s].push(q);if(!r){this.multiDatesPicker.dates[s].sort(k.compareDates)}}}function o(q){if(!q){q="picked"}this.multiDatesPicker.dates[q].sort(k.compareDates)}function f(q,s,r){if(!s){s="object"}return k.dateConvert.call(this,q,s,r)}var k={init:function(v){var q=a(this);this.multiDatesPicker.changed=false;var u={beforeShow:function(w,x){this.multiDatesPicker.changed=false;if(this.multiDatesPicker.originalBeforeShow){this.multiDatesPicker.originalBeforeShow.call(this,w,x)}},onSelect:function(y,B){var w=a(this);this.multiDatesPicker.changed=true;if(y){w.multiDatesPicker("toggleDate",y);this.multiDatesPicker.changed=true}if(this.multiDatesPicker.mode=="normal"&&this.multiDatesPicker.pickableRange){if(this.multiDatesPicker.dates.picked.length>0){var D=this.multiDatesPicker.dates.picked[0],C=new Date(D.getTime());k.sumDays(C,this.multiDatesPicker.pickableRange-1);if(this.multiDatesPicker.adjustRangeToDisabled){var x,z=this.multiDatesPicker.dates.disabled.slice(0);do{x=0;for(var A=0;A<z.length;A++){if(z[A].getTime()<=C.getTime()){if((D.getTime()<=z[A].getTime())&&(z[A].getTime()<=C.getTime())){x++}z.splice(A,1);A--}}C.setDate(C.getDate()+x)}while(x!=0)}if(this.multiDatesPicker.maxDate&&(C>this.multiDatesPicker.maxDate)){C=this.multiDatesPicker.maxDate}w.datepicker("option","minDate",D).datepicker("option","maxDate",C)}else{w.datepicker("option","minDate",this.multiDatesPicker.minDate).datepicker("option","maxDate",this.multiDatesPicker.maxDate)}}if(this.multiDatesPicker.originalOnSelect&&y){this.multiDatesPicker.originalOnSelect.call(this,y,B)}},beforeShowDay:function(z){var w=a(this),A=w.multiDatesPicker("gotDate",z)!==false,B=w.datepicker("option","disabled"),C=w.multiDatesPicker("gotDate",z,"disabled")!==false,x=this.multiDatesPicker.maxPicks<=this.multiDatesPicker.dates.picked.length;var y=[true,"",null];if(this.multiDatesPicker.originalBeforeShowDay){y=this.multiDatesPicker.originalBeforeShowDay.call(this,z)}y[1]=A?"ui-state-highlight":y[1];y[0]=y[0]&&!(B||C||(x&&!y[1]));return y}};if(q.val()){var s=q.val()}this.multiDatesPicker.separator=", ";if(v){if(v.separator){this.multiDatesPicker.separator=v.separator}this.multiDatesPicker.originalBeforeShow=v.beforeShow;this.multiDatesPicker.originalOnSelect=v.onSelect;this.multiDatesPicker.originalBeforeShowDay=v.beforeShowDay;this.multiDatesPicker.originalOnClose=v.onClose;q.datepicker(v);this.multiDatesPicker.minDate=a.datepicker._determineDate(this,v.minDate,null);this.multiDatesPicker.maxDate=a.datepicker._determineDate(this,v.maxDate,null);if(v.addDates){k.addDates.call(this,v.addDates)}if(v.addDisabledDates){k.addDates.call(this,v.addDisabledDates,"disabled")}k.setMode.call(this,v)}else{q.datepicker()}q.datepicker("option",u);if(s){q.multiDatesPicker("value",s)}var t=q.multiDatesPicker("value");if(this.tagName=="INPUT"){q.val(t)}var r=q.datepicker("option","altField");if(r){a(r).val(t)}q.datepicker("refresh")},compareDates:function(q,r){q=f.call(this,q);r=f.call(this,r);var s=q.getFullYear()-r.getFullYear();if(!s){s=q.getMonth()-r.getMonth();if(!s){s=q.getDate()-r.getDate()}}return s},sumDays:function(q,r){var s=typeof q;obj_date=f.call(this,q);obj_date.setDate(obj_date.getDate()+r);return f.call(this,obj_date,s)},dateConvert:function(r,t,s){var w=typeof r;if(w==t){if(w=="object"){try{r.getTime()}catch(v){a.error("Received date is in a non supported format!");return false}}return r}var q=a(this);if(typeof r=="undefined"){r=new Date(0)}if(t!="string"&&t!="object"&&t!="number"){a.error('Date format "'+t+'" not supported!')}if(!s){s=a.datepicker._defaults.dateFormat;var u=q.datepicker("option","dateFormat");if(u){s=u}}switch(w){case"object":break;case"string":r=a.datepicker.parseDate(s,r);break;case"number":r=new Date(r);break;default:a.error('Conversion from "'+t+'" format not allowed on jQuery.multiDatesPicker')}switch(t){case"object":return r;case"string":return a.datepicker.formatDate(s,r);case"number":return r.getTime();default:a.error('Conversion to "'+t+'" format not allowed on jQuery.multiDatesPicker')}return false},gotDate:function(q,s){if(!s){s="picked"}for(var r=0;r<this.multiDatesPicker.dates[s].length;r++){if(k.compareDates.call(this,this.multiDatesPicker.dates[s][r],q)===0){return r}}return false},value:function(r){if(r&&typeof r=="string"){k.addDates.call(this,r.split(this.multiDatesPicker.separator))}else{var q=k.getDates.call(this,"string");return q.length?q.join(this.multiDatesPicker.separator):""}},getDates:function(q,t){if(!q){q="string"}if(!t){t="picked"}switch(q){case"object":return this.multiDatesPicker.dates[t];case"string":case"number":var s=new Array();for(var r in this.multiDatesPicker.dates[t]){s.push(f.call(this,this.multiDatesPicker.dates[t][r],q))}return s;default:a.error('Format "'+q+'" not supported!')}},addDates:function(q,s){if(q.length>0){if(!s){s="picked"}switch(typeof q){case"object":case"array":if(q.length){for(var r=0;r<q.length;r++){e.call(this,q[r],s,true)}o.call(this,s);break}case"string":case"number":e.call(this,q,s);break;default:a.error('Date format "'+typeof q+'" not allowed on jQuery.multiDatesPicker')}}else{a.error("Empty array of dates received.")}},removeDates:function(q,t){if(!t){t="picked"}var s=[];if(Object.prototype.toString.call(q)==="[object Array]"){for(var r in q.sort(function(u,v){return v-u})){s.push(l.call(this,q[r],t))}}else{s.push(l.call(this,q,t))}return s},removeIndexes:function(r,t){if(!t){t="picked"}var s=[];if(Object.prototype.toString.call(r)==="[object Array]"){for(var q in r.sort(function(u,v){return v-u})){s.push(m.call(this,r[q],t))}}else{s.push(m.call(this,r,t))}return s},resetDates:function(q){if(!q){q="picked"}this.multiDatesPicker.dates[q]=[]},toggleDate:function(r,u){if(!u){u="picked"}switch(this.multiDatesPicker.mode){case"daysRange":this.multiDatesPicker.dates[u]=[];var s=this.multiDatesPicker.autoselectRange[1];var q=this.multiDatesPicker.autoselectRange[0];if(s<q){s=this.multiDatesPicker.autoselectRange[0];q=this.multiDatesPicker.autoselectRange[1]}for(var t=q;t<s;t++){k.addDates.call(this,k.sumDays(r,t),u)}break;default:if(k.gotDate.call(this,r)===false){k.addDates.call(this,r,u)}else{k.removeDates.call(this,r,u)}break}},setMode:function(s){var q=a(this);if(s.mode){this.multiDatesPicker.mode=s.mode}switch(this.multiDatesPicker.mode){case"normal":for(option in s){switch(option){case"maxPicks":case"minPicks":case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[option]=s[option];break}}break;case"daysRange":case"weeksRange":var r=1;for(option in s){switch(option){case"autoselectRange":r--;case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[option]=s[option];break}}if(r>0){a.error("Some mandatory options not specified!")}break}if(i.onSelect){i.onSelect()}},destroy:function(){this.multiDatesPicker=null;a(this).datepicker("destroy")}};this.each(function(){var q=a(this);if(!this.multiDatesPicker){this.multiDatesPicker={dates:{picked:[],disabled:[]},mode:"normal",adjustRangeToDisabled:true}}if(k[j]){var t=k[j].apply(this,Array.prototype.slice.call(h,1));switch(j){case"removeDates":case"removeIndexes":case"resetDates":case"toggleDate":case"addDates":var r=q.datepicker("option","altField");var s=k.value.call(this);if(r!==undefined&&r!=""){a(r).val(s)}if(this.tagName=="INPUT"){q.val(s)}a.datepicker._refreshDatepicker(this)}switch(j){case"removeDates":case"getDates":case"gotDate":case"sumDays":case"compareDates":case"dateConvert":case"value":n=t}return t}else{if(typeof j==="object"||!j){return k.init.apply(this,h)}else{a.error("Method "+j+" does not exist on jQuery.multiDatesPicker")}}return false});return n};var d="multiDatesPicker";var b=new Date().getTime();var c;a.multiDatesPicker={version:false};a.multiDatesPicker.initialized=false;a.multiDatesPicker.uuid=new Date().getTime();a.multiDatesPicker.version=a.ui.multiDatesPicker.version;a.multiDatesPicker._hideDatepicker=a.datepicker._hideDatepicker;a.datepicker._hideDatepicker=function(){var f=this._curInst.input[0];var e=f.multiDatesPicker;if(!e||(this._curInst.inline===false&&!e.changed)){return a.multiDatesPicker._hideDatepicker.apply(this,arguments)}else{e.changed=false;a.datepicker._refreshDatepicker(f);return}};window["DP_jQuery_"+b]=a})(jQuery);